function rand(a){return Math.floor(Math.random()*a+1)}function hideFlashPromo(){Ubisoft.Homepage.loadGamefinder()}function trim(a){return a.replace(/^\s+|\s+$/g,"")}function openWindow(a,b){var c=window.open(a,b);if(!c){Ubisoft.Gamefinder.openWindowFromSwf(a,b)}else{c.focus()}}var GamefinderParams={keyword:"",featured:"1",genre:"0",platform:"0",rating:"0",sort:"ReleaseDate_DESC"};Ubisoft.Homepage={Cookie:{getValue:function(){if(Cookie.read("gamefinderagegate")){return Cookie.read("gamefinderagegate")}else{return-1}},setValue:function(a){Cookie.write("gamefinderagegate",a)}},init:function(){$$("a.anim-link").each(function(a){a.addEvent("mouseenter",function(){this.getElement("span").addClass("on");this.getElement("span").removeClass("off")});a.addEvent("mouseleave",function(){this.getElement("span").addClass("off");this.getElement("span").removeClass("on")})});Ubisoft.settings.hasFlash=FlashDetect.DetectVersion(Ubisoft.settings.flash.version,Ubisoft.settings.flash.rev,Ubisoft.settings.flash.build);if(!Ubisoft.settings.hasFlash){$("flash-container").addClass("noflash");return}this.openPromotion();return},openPromotion:function(){Ubisoft.Homepage.initFlashArea();$("game-finder").setStyles({width:"100%"});var a=document.getElementById("locale").firstChild.nodeValue.substr(0,2).toLowerCase();var b=trim(document.getElementById("locale").firstChild.nodeValue.toLowerCase());if(trim(jQuery("#dvTakeover").html()).length>0){jQuery("#game-finder-flash").html(jQuery("#dvTakeover").html())}else{hideFlashPromo()}},closePromotion:function(){dialog.hide();Ubisoft.Homepage.loadGamefinder()},initFlashArea:function(){if($("flash-container").getStyle("height")=="0px"){$("flash-container").setStyles({"border-bottom":"none",height:"auto"});$("game-finder").setStyles({height:446,width:996})}$("primary-spotlight").setStyle("display","none")},loadGamefinder:function(){Ubisoft.Homepage.initFlashArea();$("game-finder").setStyles({width:996});var a={configUrl:"config/application.xml",configUrlMain:"config/mainApplication.xml",search:escape(JSON.encode(GamefinderParams))};var b={};var c={wmode:"opaque",align:"middle",scale:"noscale",allowFullScreen:"false",allowScriptAccess:"sameDomain",play:"true",quality:"high"};swfobject.embedSWF("resources/assets/flash/main.swf?"+rand(1e6),"game-finder-flash",996,441,"9.0.0",null,a,c,b)}};window.addEvent("domready",function(){Ubisoft.Homepage.init()})
